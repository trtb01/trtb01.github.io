<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple markdown calendar (dates)</title>
    <style>
        body {
            background-color: #000000;
            color: #ffffff;
            font-family: monospace;
            margin: 20px;
            text-transform: lowercase;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        select, button {
            background-color: #000000;
            color: #ffffff;
            border: 1px solid #ff0000;
            padding: 10px;
            margin-right: 10px;
            margin-bottom: 10px;
            font-family: inherit;
            cursor: pointer;
            text-transform: lowercase;
        }

        select:focus, button:focus, button:active {
            outline: none;
            background-color: #ff0000;
            color: #000000;
        }

        button#copy-btn {
            border: 1px solid #ffffff;
        }
        
        button#copy-btn:hover {
            border-color: #ff0000;
            color: #ff0000;
        }

        textarea {
            width: 100%;
            height: 600px;
            background-color: #000000;
            color: #ffffff;
            border: 1px solid #333;
            padding: 10px;
            margin-top: 20px;
            font-family: monospace;
            resize: none;
        }

        textarea:focus {
            outline: none;
            border-color: #ff0000;
        }

        .controls {
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }

        label {
            margin-right: 5px;
            color: #ff0000;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="controls">
        <label>month</label>
        <select id="month-select"></select>

        <label>year</label>
        <select id="year-select"></select>

        <button onclick="generateCalendar()">generate markdown</button>
        <button id="copy-btn" onclick="copyToClipboard()">copy to clipboard</button>
    </div>

    <textarea id="output" readonly></textarea>
</div>

<script>
    const monthSelect = document.getElementById('month-select');
    const yearSelect = document.getElementById('year-select');
    const outputArea = document.getElementById('output');

    const months = [
        "january", "february", "march", "april", "may", "june", 
        "july", "august", "september", "october", "november", "december"
    ];

    const dayNames = [
        "sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"
    ];

    months.forEach((m, index) => {
        const opt = document.createElement('option');
        opt.value = index;
        opt.textContent = m;
        monthSelect.appendChild(opt);
    });

    const currentYear = new Date().getFullYear();
    [currentYear, currentYear + 1].forEach(y => {
        const opt = document.createElement('option');
        opt.value = y;
        opt.textContent = y;
        yearSelect.appendChild(opt);
    });

    const today = new Date();
    monthSelect.value = today.getMonth();
    yearSelect.value = currentYear;

    function pad(num) {
        return num.toString().padStart(2, '0');
    }

    function generateCalendar() {
        const monthIndex = parseInt(monthSelect.value);
        const year = parseInt(yearSelect.value);
        
        // get days in month
        const daysInMonth = new Date(year, monthIndex + 1, 0).getDate();

        let markdown = "";
        let currentWeek = 1;

        markdown += `# week ${pad(currentWeek)}\n`;

        for (let day = 1; day <= daysInMonth; day++) {
            const dateObj = new Date(year, monthIndex, day);
            const dayOfWeek = dateObj.getDay(); // 0=sun, 1=mon, ... 6=sat
            
            // Check for Monday start to split weeks
            if (dayOfWeek === 1 && day !== 1) {
                currentWeek++;
                markdown += `\n# week ${pad(currentWeek)}\n`;
            }

            // formatting: yy-mm-dd - dayname
            const yy = year.toString().slice(-2);
            const mm = pad(monthIndex + 1);
            const dd = pad(day);
            const dName = dayNames[dayOfWeek];

            markdown += `## ${yy}-${mm}-${dd} - ${dName}\n`;
        }

        outputArea.value = markdown;
    }

    function copyToClipboard() {
        outputArea.select();
        document.execCommand('copy');
        
        const btn = document.getElementById('copy-btn');
        const originalText = btn.textContent;
        btn.textContent = "copied!";
        btn.style.backgroundColor = "#ff0000";
        btn.style.color = "#000000";
        
        setTimeout(() => {
            btn.textContent = originalText;
            btn.style.backgroundColor = "#000000";
            btn.style.color = "#ffffff";
        }, 1000);
    }

    generateCalendar();

</script>

</body>
</
    html>
